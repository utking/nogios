{% load static %}
{% load cache %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Nogios{% if title %} | {{ title }}{% endif %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css">
        {% block custom_css %}
        {% endblock custom_css %}
    </head>
    <body>
        {% block navigation %}
            {% cache 600 navbar %}
            <nav class="navbar" role="navigation" aria-label="main navigation">
              <div class="navbar-brand">
                <span class="navbar-item tag is-info is-large" href="/">NOGIOS</span>

                <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
                  <span aria-hidden="true"></span>
                  <span aria-hidden="true"></span>
                  <span aria-hidden="true"></span>
                </a>
              </div>

              <div id="navbarBasicExample" class="navbar-menu">
                <div class="navbar-start">

                  <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">
                      Status
                    </a>

                    <div class="navbar-dropdown">
                      <a class="navbar-item" href="/status/hosts">
                        Hosts
                      </a>

                      <a class="navbar-item" href="/status/services">
                        Services
                      </a>

                      <hr class="navbar-divider">

                      <a class="navbar-item" href="/status/unhandled">
                        Unhandled
                      </a>

                    </div>
                  </div>

                  <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">
                      Entities
                    </a>

                    <div class="navbar-dropdown">
                      <a class="navbar-item" href="/hosts">
                        Hosts
                      </a>

                      <a class="navbar-item" href="/services">
                        Services
                      </a>

                      <a class="navbar-item" href="/commands">
                        Commands
                      </a>

                      <a class="navbar-item" href="/time_periods">
                        Time periods
                      </a>

                      <a class="navbar-item" href="/contacts">
                        Users
                      </a>

                      <a class="navbar-item" href="/contacts/groups">
                        Groups
                      </a>
                    </div>
                  </div>

                  <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">
                      Config
                    </a>

                    <div class="navbar-dropdown">
                      <a class="navbar-item" href="/hosts/statuses">
                        Host statuses
                      </a>
                      <a class="navbar-item" href="/services/statuses">
                        Service statuses
                      </a>

                      <hr class="navbar-divider">

                      <a class="navbar-item" href="/hosts/reload_config">
                        Reload hosts
                      </a>
                      <a class="navbar-item" href="/services/reload_config">
                        Reload services
                      </a>
                      <a class="navbar-item" href="/contacts/reload_config">
                        Reload contacts
                      </a>
                      <a class="navbar-item" href="/commands/reload_config">
                        Reload commands
                      </a>
                      <a class="navbar-item" href="/time_periods/reload_config">
                        Reload time periods
                      </a>

                      <hr class="navbar-divider">

                      <a class="navbar-item" href="/reset_cache">
                        Reset cache
                      </a>
                    </div>
                  </div>

                  <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">
                      More
                    </a>

                    <div class="navbar-dropdown">
                      <a class="navbar-item" href="/admin">
                        Admin panel
                      </a>
                    </div>
                  </div>

                  <a class="navbar-item" href="/about">
                    About
                  </a>
                </div>

                <div class="navbar-end">
                  <div class="navbar-item">
                    <div class="buttons">
                      <a class="button is-light is-small" onclick="reload_location()">
                        Reload
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </nav>
            {% endcache %}
        {% endblock navigation %}
        <section class="section">
        <div class="container">
            {% block content %}{% endblock content %}
        </div>
      </section>
    <script defer src="https://use.fontawesome.com/releases/v5.14.0/js/all.js"></script>

    <script>
      document.addEventListener('DOMContentLoaded', () => {

      // Get all "navbar-burger" elements
      const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
      // Check if there are any navbar burgers
      if ($navbarBurgers.length > 0) {
        // Add a click event on each of them
        $navbarBurgers.forEach( el => {
          el.addEventListener('click', () => {
            // Get the target from the "data-target" attribute
            const target = el.dataset.target;
            const $target = document.getElementById(target);
            // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
            el.classList.toggle('is-active');
            $target.classList.toggle('is-active');
          });
        });
      }
    });

    function reload_location() {
        document.location.reload();
    }
    </script>

    {% block javascript %}
    {% endblock javascript %}
    </body>
</html>